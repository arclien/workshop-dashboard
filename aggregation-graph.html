<!--
    THIS EXAMPLE WAS DOWNLOADED FROM https://echarts.apache.org/examples/en/editor.html?c=radar
-->
<!DOCTYPE html>
<html style="height: 100%">
    <head>
        <meta charset="utf-8">
    </head>
    <body style="height: 100%; margin: 0">
        <div id="container" style="height: 100%"></div>

        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
        <!-- Uncomment this line if you want to dataTool extension
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5/dist/extension/dataTool.min.js"></script>
        -->
        <!-- Uncomment this line if you want to use gl extension
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts-gl@2/dist/echarts-gl.min.js"></script>
        -->
        <!-- Uncomment this line if you want to echarts-stat extension
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts-stat@latest/dist/ecStat.min.js"></script>
        -->
        <!-- Uncomment this line if you want to use map
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5/map/js/china.js"></script>
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5/map/js/world.js"></script>
        -->
        <!-- Uncomment these two lines if you want to use bmap extension
        <script type="text/javascript" src="https://api.map.baidu.com/api?v=2.0&ak=<Your Key Here>"></script>
        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5/dist/extension/bmap.min.js"></script>
        -->

        <script type="text/javascript">
var dom = document.getElementById("container");
var myChart = echarts.init(dom);
var app = {};

var option;

var data = {
    'Aaron':{
        first:[21.125, 49.4, 12.875, 9.7, 6, 15.3, 25.025, 34],
        second:[3.688, 18.25, 11.225, 19.75, 42.3, 17.825, 18.2, 15.075],
    },
    'Carole':{
        first:[13.825, 30.175, 8.3565, 11.575, 16.9875, 20.5, 39.869, 15.8625],
        second:[10.8, 5.55, 5.637, 25.55, 35.5, 23.925, 32.963, 1.825],
    },
    'Charles':{
        first: [3.65, 5, 13.4875, 23.9875, 32.45, 26.3625, 39.2, 21.325],
        second: [9.638, 17.075, 34.075, 25.625, 28.825, 13.688, 7.15, 11.8],
    },
    'Flynn':{
        first:[15.406, 14.4375, 30.4999, 23.859, 13.5, 11.281, 17.25, 14.75],
        second:[19.887, 12.625, 8.238, 24.025, 29.075, 22.388, 22.363, 16.45],
    },
    'Gavin':{
        first: [9.529230769230768, 5.923076923076923, 37.106153846153845, 16.134615384615387, 21.826923076923077, 26.529230769230768, 23.153846153846153, 32.91384615384615],
        second: [4.913, 23.05, 16.763, 23.55, 23.325, 17.413, 25.688, 31.55],
    },
    'Ian':{
        first:[4.9333, 18.7, 10.2833, 17.25, 40.5666, 20.3166, 44.3, 27.2833],
        second:[14.1, 31.175, 37.2, 20.237, 28.1, 14, 10.463, 2.75],
    },
    'Jason':{
        first:[10.068181818181817, 21.93181818181818, 10.84090909090909, 20.36363636363636, 36.18181818181817, 24.159090909090907, 29.795454545454543, 19.27272727272727],
        second:[16.038, 34.4, 14.875, 14.8, 32.45, 20.588, 15.325, 8.15],
    },
    'Masha':{
        first:[12.658, 20.716666666666665, 12.633333333333333, 8.316666666666666, 15.450000000000001, 15.65, 24.758666666666667, 22.349999999999998],
        second: [23.7, 34.863, 18.775, 11.3, 18.55, 27.013, 16.225, 11.45],
    },
    'Oliver':{
        first: [16.317692307692308, 14.596153846153847, 40.40384615384615, 26.288461538461537, 15.711538461538462, 36.91384615384615, 30.807692307692303, 9.98076923076923],
        second: [7.45, 4.225, 21.763, 30.725, 23, 28.813, 9.05, 5]
    },
    'Peter':{
        first:[9.075333333333333, 22.133333333333336, 29.133333333333336, 12.083333333333334, 23.400000000000002, 17.175333333333334, 23.7, 14.966666666666667],
        second: [22.113, 14.313, 39.113, 31.038, 20.75, 20.013, 4.563, 4.55],
    },
    'Sonny':{
        first:[7.388888888888889, 20.055555555555557, 25.27777777777778, 24.77777777777778, 37.11111111111111, 23.444444444444446, 28.416666666666664, 25.444444444444443],
        second: [4.887, 20.013, 12.587, 15.75, 37.35, 19.138, 35.538, 36.563],
    },
    'Theo':{
        first: [3.2708333333333335, 8.979166666666668, 14.208333333333334, 25.083333333333336, 26.979166666666668, 27.552500000000002, 35.94833333333333, 18.104166666666668],
        second: [4.2, 25.675, 22.35, 20.238, 37.05, 17.375, 21.325, 4.563]
    },
    'Tom':{
        first: [4.971818181818182, 18.999999999999996, 13.636363636363635, 29.409090909090907, 38.59090909090909, 16.42590909090909, 33.54545454545454, 7.568181818181817],
        second: [11.175, 30.45, 17.6, 14.95, 18.85, 21.775, 16.675, 26.725]
    },
}

const sumArray = (array) => {
   const newArray = [];
   array.forEach(sub => {
      sub.forEach((num, index) => {
         if(newArray[index]){
            newArray[index] += num;
         }else{
            newArray[index] = num;
         }
      });
   });
   return newArray;
}


const maxArray = (array) => {
   const newArray = [];
   array.forEach(sub => {
      sub.forEach((num, index) => {
         if(newArray[index]){
            newArray[index] = Math.max(newArray[index], num);
         }else{
            newArray[index] = num;
         }
      });
   });
   return newArray;
}


const minArray = (array) => {
   const newArray = [];
   array.forEach(sub => {
      sub.forEach((num, index) => {
         if(newArray[index]){
            newArray[index] = Math.min(newArray[index], num);
         }else{
            newArray[index] = num;
         }
      });
   });
   return newArray;
}


const maxData = {
    first: maxArray(Object.keys(data).map((key, index) => data[key].first)),
    second: maxArray(Object.keys(data).map((key, index) => data[key].second)),
}

const minData = {
    first: minArray(Object.keys(data).map((key, index) => data[key].first)),
    second: minArray(Object.keys(data).map((key, index) => data[key].second)),
}

const exist_count = Object.keys(data).map((key, index) => data[key].first).filter((el)=> el.length > 0).length;

data['aggregation'] = {
    first: sumArray(Object.keys(data).map((key, index) => data[key].first)).map((el) => Math.floor(el / exist_count)),
    second: sumArray(Object.keys(data).map((key, index) => data[key].second)).map((el) => Math.floor(el / exist_count)),
};

console.log(maxData)
option = {
    title: [
        {
            text: '강점검사'
        }, 
        {
            subtext: '욕구 강점',
            left: '20%',
            top: '75%',
            textAlign: 'center'
        },
        {
            subtext: '행동 판단 강점',
            left: '75%',
            top: '75%',
            textAlign: 'center'
        }
    ],
    legend: {
        data: (function (){
            return [...Object.keys(data).map((key, index) => {
                return key
            }), 'max','min'];
        })(),
    },
    radar: [
        {
            shape: 'circle',
            indicator: [
                { name: '외교', max: 50},
                { name: '동기부여', max: 50},
                { name: '창조', max: 50},
                { name: '탐구', max: 50},
                { name: '평가', max: 50},
                { name: '조정', max: 50},
                { name: '완성', max: 50},
                { name: '추진', max: 50},
            ],
            name: {
                textStyle: {
                    color: '#fff',
                    backgroundColor: '#666',
                    borderRadius: 3,
                    padding: [3, 5]
                }
            },
            splitArea:{
                show:false,
            },
            startAngle:115,
            radius: 250,
            center: ['20%', '45%'],
        },
        {
            shape: 'circle',
            indicator: [
                { name: '외교', max: 50},
                { name: '동기부여', max: 50},
                { name: '창조', max: 50},
                { name: '탐구', max: 50},
                { name: '평가', max: 50},
                { name: '조정', max: 50},
                { name: '완성', max: 50},
                { name: '추진', max: 50},
            ],
            name: {
                textStyle: {
                    color: '#fff',
                    backgroundColor: '#666',
                    borderRadius: 3,
                    padding: [3, 5]
                }
            },
            splitArea:{
                show:false,
            },
            startAngle:115,
            radius: 250,
            center: ['75%', '45%'],
        }
    ],
    series: [
        {
            type: 'radar',
            symbol: 'none',
            emphasis: {
                lineStyle: {
                    width: 6
                }
            },
            data: (function (){
                return [
                    ...Object.keys(data).map((key, index) => {
                        const obj = {
                            value: data[key].first,
                            name: key,
                        }
                        return (key === 'aggregation') ? { 
                            ...obj,
                            areaStyle : {
                                color: new echarts.graphic.RadialGradient(0, 1, 1, [
                                    {
                                        color: 'rgba(255, 145, 124, 1)',
                                        offset: 0
                                    },
                                    {
                                        color: 'rgba(255, 145, 124, 1)',
                                        offset: 1
                                    }
                                ])
                        }} : obj;
                    }),
                    {
                        value: maxData.first,
                        name: 'max',
                        areaStyle : {
                            color: new echarts.graphic.RadialGradient(0, 1, 1, [
                                {
                                    color: 'rgba(123, 188, 211, 1)',
                                    offset: 0
                                },
                                {
                                    color: 'rgba(123, 188, 211, 1)',
                                    offset: 1
                                }
                            ])
                        }
                    },
                    {
                        value: minData.first,
                        name: 'min',
                        areaStyle : {
                            color: new echarts.graphic.RadialGradient(0, 1, 1, [
                                {
                                    color: 'rgba(123, 200, 124, 1)',
                                    offset: 0
                                },
                                {
                                    color: 'rgba(123, 200, 124, 1)',
                                    offset: 1
                                }
                            ])
                        }
                    }
                ];
            })(),
        }, 
        {
            type: 'radar',
            radarIndex: 1,
            symbol: 'none',
            emphasis: {
                lineStyle: {
                    width: 4
                }
            },
            data: (function (){
                return [
                    ...Object.keys(data).map((key, index) => {
                        const obj = {
                            value: data[key].second,
                            name: key,
                        }
                        return (key === 'aggregation') ? { 
                            ...obj,
                            areaStyle : {
                                color: new echarts.graphic.RadialGradient(0, 1, 1, [
                                    {
                                        color: 'rgba(255, 145, 124, 1)',
                                        offset: 0
                                    },
                                    {
                                        color: 'rgba(255, 145, 124, 1)',
                                        offset: 1
                                    }
                                ])
                        }} : obj;
                    }),
                    {
                        value: maxData.second,
                        name: 'max',
                        areaStyle : {
                            color: new echarts.graphic.RadialGradient(0, 1, 1, [
                                {
                                    color: 'rgba(123, 188, 211, 1)',
                                    offset: 0
                                },
                                {
                                    color: 'rgba(123, 188, 211, 1)',
                                    offset: 1
                                }
                            ])
                        }
                    },
                    {
                        value: minData.second,
                        name: 'min',
                        areaStyle : {
                            color: new echarts.graphic.RadialGradient(0, 1, 1, [
                                {
                                    color: 'rgba(123, 200, 124, 1)',
                                    offset: 0
                                },
                                {
                                    color: 'rgba(123, 200, 124, 1)',
                                    offset: 1
                                }
                            ])
                        }
                    }
                ];
            })(),
        }
    ]
};


if (option && typeof option === 'object') {
    myChart.setOption(option);
}

        </script>
    </body>
</html>
    